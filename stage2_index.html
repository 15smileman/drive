<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>주행연습 시뮬레이터 - 2단계</title>
  <link rel="stylesheet" href="stage2_styles.css" />
</head>

<body>
  <header>
    <h1>주행연습 시뮬레이터 - 2단계</h1>
    <nav class="stage-nav">
      <a href="index.html" class="stage-link">1단계: 주차연습</a>
      <span class="stage-current">2단계: 주행연습</span>
    </nav>
  </header>

  <main>
    <section class="simulation">
      <canvas id="playfield" width="960" height="540" aria-label="주행 연습 화면"></canvas>

      <!-- 게임 시작/실패 오버레이 -->
      <div id="game-overlay" class="game-overlay">
        <div class="overlay-content">
          <h2 id="overlay-title">주행연습 시뮬레이터</h2>
          <p id="overlay-message">시작 버튼을 눌러 주행 연습을 시작하세요</p>
          <button id="start-game-btn" class="start-btn">게임 시작</button>
        </div>
      </div>
    </section>

    <!-- 컨트롤과 도전 버튼들을 나란히 배치 -->
    <div class="control-and-challenge-container">
      <!-- 왼쪽 도전 버튼 그룹 -->
      <div class="challenge-left-side">
        <div class="challenge-item">
          <button id="challenge-outer" class="challenge-btn active" data-course="outer">주행1</button>
          <div class="time-record" id="time-record-outer">--</div>
        </div>
        <div class="challenge-item">
          <button id="challenge-outer2" class="challenge-btn" data-course="outer2">주행2</button>
          <div class="time-record" id="time-record-outer2">--</div>
        </div>
      </div>

      <!-- 기존 컨트롤 패드 -->
      <div class="mobile-control-pad">
        <div class="control-pad-container">
          <!-- 다시시작 버튼 -->
          <button id="reset-btn-mobile" class="arrow-btn reset-btn large-btn" type="button">
            <span class="arrow">↻</span>
          </button>

          <!-- 왼쪽 조향 -->
          <button id="left-btn" class="arrow-btn left-btn" type="button">
            <span class="arrow">◀</span>
          </button>

          <!-- 중앙 전진/후진 컨트롤 -->
          <div class="vertical-controls">
            <button id="forward-btn" class="arrow-btn forward-btn" type="button">
              <span class="arrow">▲</span>
            </button>
            <button id="backward-btn" class="arrow-btn backward-btn" type="button">
              <span class="arrow">▼</span>
            </button>
          </div>

          <!-- 오른쪽 조향 -->
          <button id="right-btn" class="arrow-btn right-btn" type="button">
            <span class="arrow">▶</span>
          </button>

          <!-- 브레이크 버튼 -->
          <button id="brake-btn" class="arrow-btn brake-btn large-btn" type="button">
            <span class="arrow">■</span>
          </button>
        </div>
      </div>

      <!-- 오른쪽 도전 버튼 그룹 -->
      <div class="challenge-right-side">
        <div class="challenge-item">
          <button id="challenge-s" class="challenge-btn" data-course="s">S라인1</button>
          <div class="time-record" id="time-record-s">--</div>
        </div>
        <div class="challenge-item">
          <button id="challenge-s2" class="challenge-btn" data-course="s2">S라인2</button>
          <div class="time-record" id="time-record-s2">--</div>
        </div>
        <div class="challenge-item">
          <button id="challenge-all" class="challenge-btn" data-course="all">전체</button>
          <div class="time-record all-record" id="time-record-all">--</div>
        </div>
      </div>
    </div>

    <!-- 성공 메시지 오버레이 -->
    <div id="success-overlay" class="success-overlay hidden">
      <div class="success-content">
        <h2 id="success-title">🎉 코스 완주!</h2>
        <p id="success-time">시간: 0.0초</p>
      </div>
    </div>

    <div class="controls-info">
      <p>💡 <strong>조작법:</strong> 화살표 키 또는 WASD로 차량을 조작하세요. 터치스크린에서는 화면을 터치하고 드래그하거나 하단 버튼을 사용하여 운전하세요. 자동차 가운데 빨간 정지 버튼을 터치해서 즉시 정지할 수도 있습니다.</p>
    </div>

    <section class="course-order">
      <h2>주행 연습 순서</h2>
      <div class="order-grid">
        <div class="order-item">
          <span class="order-number blue">1</span>
          <div class="order-content">
            <h3>외곽 트랙</h3>
            <p>타원형 트랙 한 바퀴 완주 (기초 단계)</p>
          </div>
        </div>
        <div class="order-item">
          <span class="order-number blue">2</span>
          <div class="order-content">
            <h3>S자 코스</h3>
            <p>내부 S자 구간 완주 (고급 단계)</p>
          </div>
        </div>
        <div class="order-item">
          <span class="order-number blue">3</span>
          <div class="order-content">
            <h3>전체 코스</h3>
            <p>외곽 + S자 연속 완주 (마스터 단계)</p>
          </div>
        </div>
      </div>
      <p class="order-note">💡 차선을 벗어나면 <span class="red-text">실패</span>, 완주하면 <span class="green-text">성공</span>!</p>
    </section>

    <!-- HUD 정보 섹션들 -->
    <aside class="hud" aria-live="polite">
      <div class="goal-info">
        <h2>🎯 목표</h2>
        <ol>
          <li>흰색 차량으로 코스를 완주하기</li>
          <li>차선(노란선)을 벗어나지 않고 주행</li>
          <li>가능한 빠른 시간에 완주하기</li>
        </ol>
      </div>
      <div class="tips">
        <h2>📝 주행 가이드</h2>
        <ul>
          <li><strong>조작법:</strong> 화면 드래그 또는 하단 화살표 버튼 사용</li>
          <li><strong>차선 준수:</strong> 노란 차선을 벗어나면 즉시 실패</li>
          <li><strong>속도 조절:</strong> 커브 구간에서는 감속 필수</li>
          <li><strong>브레이크:</strong> 빠르게 정지하려면 브레이크 버튼 사용</li>
        </ul>
      </div>
    </aside>

    <section class="checklist">
      <h2>✅ 주행 단계별 체크리스트</h2>
      <div class="checklist-grid">
        <div class="checklist-item">
          <h3>🔵 외곽 트랙</h3>
          <ul>
            <li>출발선에서 출발</li>
            <li>타원형 트랙 따라 주행</li>
            <li>차선 유지하며 한 바퀴</li>
            <li>출발선 통과로 완주</li>
          </ul>
        </div>
        <div class="checklist-item">
          <h3>🔵 S자 코스</h3>
          <ul>
            <li>S자 진입구에서 출발</li>
            <li>좌우 커브 연속 주행</li>
            <li>차선 이탈 주의</li>
            <li>출구 통과로 완주</li>
          </ul>
        </div>
        <div class="checklist-item">
          <h3>🔵 전체 코스</h3>
          <ul>
            <li>외곽 트랙 완주</li>
            <li>S자 진입</li>
            <li>S자 완주</li>
            <li>연속 주행 성공</li>
          </ul>
        </div>
      </div>
    </section>
  </main>

  <footer>
    <p>실제 도로 연습 전 가상의 공간에서 절차를 익히는 데 활용하세요.</p>
  </footer>

  <script src="stage2_script.js?v=109" defer></script>
</body>

</html>
